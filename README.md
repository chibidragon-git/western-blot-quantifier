# 🧬 Western Blot Quantifier

Western Blotのバンドを自動検出して定量化するWebアプリ。  
画像をアップロードするだけ。レーン数の指定は不要。

## ✨ 特徴

- **ピーク検出方式** — 水平プロファイルからバンド位置を正確に特定
- **全自動** — レーン数の指定不要。バンドを自動認識
- **プロファイル可視化** — 検出プロセスをグラフで確認可能
- **相対定量** — Volume・相対強度を自動計算
- **CSVエクスポート** — 定量データをワンクリックでダウンロード

## 🖼️ スクリーンショット

| 元画像 + 検出結果 | 水平プロファイル | 定量グラフ |
|:---:|:---:|:---:|
| バンド自動検出 | ピーク位置の可視化 | 相対強度の棒グラフ |

## 🚀 使い方

### Webアプリとして使う（推奨）

アプリのURLは管理者にお問い合わせください。

### ローカルで動かす

```bash
# リポジトリをクローン
git clone https://github.com/chibidragon-git/western-blot-quantifier.git
cd western-blot-quantifier

# 依存関係をインストール
pip install -r requirements.txt

# アプリを起動
streamlit run app.py
```

ブラウザで `http://localhost:8501` を開く。

## ⚙️ パラメータ

| パラメータ | デフォルト | 説明 |
|:---|:---:|:---|
| 検出感度 | 0.3 | 小さいほど薄いバンドも検出。大きいほど明確なバンドのみ |
| 最小バンド幅 | 10 px | これより狭いピークは無視 |
| マージ距離 | 15 px | この距離以内のピークは1つのバンドとして統合 |

## 💡 Tips

- **バンドが検出されない** → 感度を下げる（0.1〜0.2）
- **ノイズで誤検出** → 感度を上げる（0.4〜0.6）
- **バンドが分離しない** → マージ距離を下げる
- **画像はトリミング推奨** — 解析対象のバンド領域だけを切り出すと精度UP

## 🔧 技術スタック

- [Streamlit](https://streamlit.io/) — Webフレームワーク
- [OpenCV](https://opencv.org/) — 画像処理
- [SciPy](https://scipy.org/) — ピーク検出
- [Matplotlib](https://matplotlib.org/) — グラフ描画

## 📝 バージョン履歴

| バージョン | 方式 | 変更点 |
|:---|:---|:---|
| v4.4 | ピーク検出 | 水平プロファイルベースに変更。バンド位置の精度向上 |
| v4.3 | スマートハイブリッド | 濃いバンドと薄いバンドで閾値を自動切替 |

## 📄 ライセンス

MIT License
